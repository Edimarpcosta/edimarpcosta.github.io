<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Datas filtradas</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        th,
        td {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }

        td:nth-child(3) {
            text-align: left;
        }
    </style>

</head>

<body>
    <form>
        <label for="start">Data inicial:</label>
        <input type="date" id="start" name="start">
        <label for="end">Data final:</label>
        <input type="date" id="end" name="
    <input type=" date" id="end" name="end">
        <button type="button" onclick="updateDateList()">Gerar lista de datas</button>
        
    </form>
    <table>
        <thead>
            <tr>
                <th>Dia</th>
                <th>Data</th>
            </tr>
        </thead>
        <tbody id="dateList"></tbody>
        <button type="button" onclick="copyData()">Copiar datas</button>

    </table>
    <script>
function copyData() {
  const dateList = document.getElementById("dateList");
  const rows = dateList.getElementsByTagName("tr");
  let data = "";
  for (let i = 0; i < rows.length; i++) {
    const cells = rows[i].getElementsByTagName("td");
    if (cells.length > 0) {
      data += cells[1].innerText + "\n";
    }
  }
  navigator.clipboard.writeText(data);
  alert("Datas copiadas para a área de transferência!");
}

        function getDates(startDate, endDate) {
            var dateArray = [];
            var currentDate = new Date(startDate);
            while (currentDate <= new Date(endDate)) {
                dateArray.push(new Date(currentDate));
                currentDate.setDate(currentDate.getDate() + 1);
            }
            return dateArray;
        }

        function getWeek(date) {
            var onejan = new Date(date.getFullYear(), 0, 1);
            return Math.ceil(((date - onejan) / 86400000 + onejan.getDay() + 1) / 7);
        }

        function updateDateList() {
            var startDateInput = document.getElementById("start");

            var endDateInput = document.getElementById("end");


            var startDate = new Date(startDateInput.value);
            var endDate = new Date(endDateInput.value);

            var dateArray = getDates(startDate, endDate);

            var order = [2, 4, 3, 5];
            var filteredArray = [];
            var counter = 0;
            var currentWeek = 0;

            for (var i = 0; i < dateArray.length; i++) {
                var dayOfWeek = dateArray[i].getDay();
                var weekNumber = getWeek(dateArray[i]);

                if (dayOfWeek == order[counter] && weekNumber != currentWeek) {
                    filteredArray.push(dateArray[i]);
                    counter++;
                    if (counter == order.length) {
                        counter = 0;
                    }
                    currentWeek = weekNumber;
                }
            }

            var dateList = document.getElementById("dateList");
            dateList.innerHTML = "";
            for (var i = 0; i < filteredArray.length; i++) {
                var row = document.createElement("tr");

                // Dia da semana
                var dayOfWeek = filteredArray[i].toLocaleDateString("pt-BR", { weekday: "short" });
                var dayCell = document.createElement("td");
                dayCell.appendChild(document.createTextNode(dayOfWeek));
                row.appendChild(dayCell);

                // Data
                var formattedDate = filteredArray[i].toLocaleDateString("pt-BR", { day: "2-digit", month: "2-digit", year: "numeric" });
                var dateCell = document.createElement("td");
                dateCell.appendChild(document.createTextNode(formattedDate));
                row.appendChild(dateCell);

                if (dayOfWeek == "Ter") {
                    var nextSunday = new Date(filteredArray[i]);
                    nextSunday.setDate(filteredArray[i].getDate() + (7 - filteredArray[i].getDay()) + 2);
                    var formattedSunday = nextSunday.toLocaleDateString("pt-BR", { day: "2-digit", month: "2-digit", year: "numeric" });
                    var sundayCell = document.createElement("td");
                    sundayCell.appendChild(document.createTextNode("Dom. " + formattedSunday));
                    row.appendChild(sundayCell);
                } else if (dayOfWeek == "Qua") {
                    var nextSunday = new Date(filteredArray[i]);
                    nextSunday.setDate(filteredArray[i].getDate() + (7 - filteredArray[i].getDay()) + 3);
                    var formattedSunday = nextSunday.toLocaleDateString("pt-BR", { day: "2-digit", month: "2-digit", year: "numeric" });
                    var sundayCell = document.createElement("td");
                    sundayCell.appendChild(document.createTextNode("Dom. " + formattedSunday));
                    row.appendChild(sundayCell);
                } else if (dayOfWeek == "Dom") {
                    continue; // pula a inserção da linha no caso de domingo
                } else {
                    var emptyCell = document.createElement("td");
                    emptyCell.appendChild(document.createTextNode(""));
                    row.appendChild(emptyCell);
                }
                dateList.appendChild(row);

            }
        }
    </script>

</body>

</html>
