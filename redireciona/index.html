<!DOCTYPE html>
<html>
<head>
    <title>Redirecionador de Links</title>
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-database.js"></script>
    <script>
        // Configurações do Firebase
        var firebaseConfig = {
            apiKey: "",
            authDomain: "redireciona-bf04a.firebaseapp.com",
            databaseURL: "https://redireciona-bf04a-default-rtdb.firebaseio.com",
            projectId: "redireciona-bf04a",
            storageBucket: "redireciona-bf04a.appspot.com",
            messagingSenderId: "95966901521",
            appId: "1:95966901521:web:2d0b8b20dbb1c356d688b0",
            measurementId: "G-Z3LV16X6Y4"
        };
        //exemplo
        //arquivos
        //arquivos/url (valor_url)
        //arquivos/senha (valor senha)
        //https://edimarpcosta.github.io/redireciona/?caminho=arquivos/folgasexe

        // Inicializa o Firebase
        firebase.initializeApp(firebaseConfig);

        function redirecionar() {
            var urlParams = new URLSearchParams(window.location.search);
            var caminho = urlParams.get('caminho');
            var senha = document.getElementById("senha").value;

            if (caminho) {
                var linksRef = firebase.database().ref(caminho);

                linksRef.once('value', function(snapshot) {
                    var link = snapshot.val();

                    if (link && link.senha === senha) {
                        window.location.href = link.url;
                    } else {
                        var mensagem = link ? "Senha incorreta!" : "Link '" + caminho + "' não encontrado";
                        alert(mensagem);
                    }
                });
            }
        }
    </script>
</head>
<body>
    <h1>Redirecionador de Links</h1>

    <label for="senha">Digite a senha:</label>
    <input type="password" id="senha">
    <button onclick="redirecionar()">Enviar</button>
</body>
</html>
