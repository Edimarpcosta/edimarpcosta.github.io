<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-database.js"></script>

<script>
  // Configurações do Firebase (substitua pelos valores do seu projeto)
  var firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "SEU_AUTH_DOMAIN",
    databaseURL: "SUA_DATABASE_URL",
    projectId: "SEU_PROJECT_ID",
    storageBucket: "SEU_STORAGE_BUCKET",
    messagingSenderId: "SEU_SENDER_ID",
    appId: "SEU_APP_ID"
  };
  
  // Inicializa o Firebase
  firebase.initializeApp(firebaseConfig);
  
  // Referência ao nó 'links' do Realtime Database
  var linksRef = firebase.database().ref('links');

  function redirecionar() {
    var arquivo = getURLParameter("arquivo");
    var senha = document.getElementById("senha").value;

    linksRef.child(arquivo).once('value', function(snapshot) {
      var link = snapshot.val();
      
      if (link && link.senha === senha) {
        window.location.href = link.url;
      } else {
        alert("Senha incorreta ou link não encontrado!");
      }
    });
  }

  // Função para obter o valor do parâmetro 'arquivo' da URL
  function getURLParameter(name) {
    var url = decodeURIComponent(window.location.href);
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
      results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
  }
</script>
