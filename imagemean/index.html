<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar imagem por Cod/EAN</title>
  </head>
  <body>
<input onclick="this.select()" name="cod"  type="text" maxlength="14" size="20" id="myInput" placeholder="CÃ³digo/EAN" style="border: solid blue 1px"/>
<button id="buscar" type="button" onclick="loadDoc()">Buscar imagem do produto</button>
<p>
<a class="class" href="" id="nomepro" target="_blank"></a>
</p>
<img id="myimage" width="40%" height="auto%"/>
<img id="myimageLarge" width="100%" height="auto%"/>
<img id="myimage2" width="100%" height="auto%"/>
<img id="myimage3" width="100%" height="auto%"/>
<img id="myimage4" width="100%" height="auto%"/>
<img id="myimage5" width="100%" height="auto%"/>
<img id="myimage6" width="100%" height="auto%"/>
<img id="myimage7" width="100%" height="auto%"/>
<img id="myimage8" width="100%" height="auto%"/>
<img id="myimage9" width="100%" height="auto%"/>
<img id="myimage10" width="100%" height="auto%"/>
<p></p>
<script>
  const textbox = document.getElementById("myInput");
textbox.addEventListener("keypress", function onEvent(event) {
    if (event.key === "Enter") {
        document.getElementById("buscar").click();
        document.getElementById("myInput").focus();
        document.getElementById("myInput").select();
    }
});

function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var data = JSON.parse(this.responseText);
     
     //limpar
     document.getElementById("myimageLarge").src = "";
      document.getElementById("myimage").src = "";
      document.getElementById("myimage2").src = "";
      document.getElementById("myimage3").src = "";
      document.getElementById("myimage4").src = "";
      document.getElementById("myimage5").src = "";
      document.getElementById("myimage6").src = "";
      document.getElementById("myimage7").src = "";
      document.getElementById("myimage8").src = "";
      document.getElementById("myimage9").src = "";
      document.getElementById("myimage10").src = "";
      document.getElementById("nomepro").innerText = "";
      document.getElementById("nomepro").href = "";
     //preencher
     document.getElementById("nomepro").innerText = data[0].productName;
      document.getElementById("nomepro").href = data[0].link;
      //
      document.getElementById("myimageLarge").src = data[0].items[0].images[0].imageUrl;
      document.getElementById("myimage").src = data[0].items[0].images[0].imageUrl;
      document.getElementById("myimage2").src = data[0].items[0].images[1].imageUrl;
      document.getElementById("myimage3").src = data[0].items[0].images[2].imageUrl;
      document.getElementById("myimage4").src = data[0].items[0].images[3].imageUrl;
      document.getElementById("myimage5").src = data[0].items[0].images[4].imageUrl;
      document.getElementById("myimage6").src = data[0].items[0].images[5].imageUrl;
      document.getElementById("myimage7").src = data[0].items[0].images[6].imageUrl;
      document.getElementById("myimage8").src = data[0].items[0].images[7].imageUrl;
      document.getElementById("myimage9").src = data[0].items[0].images[8].imageUrl;
      document.getElementById("myimage10").src = data[0].items[0].images[9].imageUrl;
      
      // +"?idsku="+document.getElementById("myInput").value
    }
  };
  //https://www.cobasi.com.br/api/catalog_system/pub/products/search?fq=alternateIdValues:
  //https://cobasi.myvtex.com/api/catalog_system/pub/products/search?fq=alternateIdValues:
  var input = document.getElementById("myInput").value;
  xhttp.open("GET", "https://api.allorigins.win/raw?url=https://www.cobasi.com.br/api/catalog_system/pub/products/search?fq=alternateIdValues:" + input, true);
 // xhttp.setRequestHeader("Content-Type", "application/json");
  //xhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
  //xhttp.withCredentials = "true";
  xhttp.send();
  }
</script>

</body>
</html>