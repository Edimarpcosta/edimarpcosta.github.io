<!DOCTYPE html>
<html>
<body>
<p>Pegar imagem via codigo</p>
<input onclick="this.select()" name="cod"  type="text" maxlength="14" size="20" id="myInput" title="Codigo / ean " style="border: solid blue 1px"/>
<button id="buscar" type="button" onclick="loadDoc()">Buscar Imagem</button>
<p id="nomepro"></p>
<img id="myimageLarge" width="100%" height="auto%"/>
<p></p>
<script>



  const textbox = document.getElementById("myInput");
textbox.addEventListener("keypress", function onEvent(event) {
    if (event.key === "Enter") {
        document.getElementById("buscar").click();
        document.getElementById("myInput").focus();
        document.getElementById("myInput").select();
    }
});

function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var data = JSON.parse(this.responseText);
     // document.getElementById("myimage").src = data.imageUrl;
      document.getElementById("myimageLarge").src = data[0].items[0].images[0].imageUrl;
      document.getElementById("nomepro").innerText = data[0].productName;
      //document.getElementById("nomepro").innerText = data.nameComplete;
      //document.getElementById("apresent").innerText = data.productSpecifications[3].fieldValues;
    }
  };
 
 var input = document.getElementById("myInput").value;
  xhttp.open("GET", "https://api.allorigins.win/raw?url=https://cobasi.myvtex.com/api/catalog_system/pub/products/search?fq=alternateIdValues:" + input, true);
 // xhttp.setRequestHeader("Content-Type", "application/json");
  //xhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
  //xhttp.withCredentials = "true";
  xhttp.send();
  }
</script>
</body>
</html>